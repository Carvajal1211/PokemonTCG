{% extends 'partials/base.html' %}
{% load static %}

{% block content %}

<div id="app">
    <h1>Crear una nueva carta</h1>
    <form @submit.prevent="createCard">
      
        
        <div>
            <label for="precio">Precio:</label>
            <input type="text" id="collection" v-model="cardData.price">
        </div>
        <!-- Agrega más campos aquí para otros datos de la carta -->
        <div>
            <button type="submit">Crear Carta</button>
        </div>
    </form>
</div>
{% endblock content %}



{% block js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.3.4/axios.min.js"></script>
<script type="text/javascript" src="/templates/components/pagination.js"></script>
<script type="text/javascript" src="/templates/components/dropdown.js"></script>

<script>
    new Vue({
        el: '#app',
        data: {
            cardData :{
                "nombre": "Espada de Fuego",
                "rareza": "Épica",
                "version": "Primera Edición",
                "precio": 200.00
            },
           
        },
        methods: {
            createCard() {
                let data = JSON.stringify(this.cardData)
                console.log(this.cardData)
       
                
                const header_data = {
                    'Content-Type': 'application/json'
                };

                // Realiza la solicitud POST a tu API
                axios.post("/api/crear_carta/",data,{ headers: header_data })
                    .then((response) => {
                        // Comprobar si se registró correctamente o si hubo un error
                        if (response.data.message) {
                            // Mostrar mensaje de éxito
                            console.log(response.data.message);
                            // Limpia los campos del formulario o realiza otras acciones necesarias
                            this.cardData.name = '';
                            this.cardData.collection = '';
                            // Limpia otros campos según sea necesario
                        } else if (response.data.error) {
                            // Mostrar mensaje de error en el frontend
                            console.error(response.data.error);
                        }
                    });
            }
        }
    });
</script>
{% endblock js %}

{
    "id": "sv2-171",
    "name": "Artazon",
    "supertype": "Trainer",
    "subtypes": [
        "Stadium"
    ],
    "rules": [
        "Once during each player's turn, that player may search their deck for a Basic Pokémon that doesn't have a Rule Box and put it onto their Bench. Then, that player shuffles their deck. (Pokémon ex, Pokémon V, etc. have Rule Boxes.)",
        "You may play only 1 Stadium card during your turn. Put it into the Active Spot, and discard it if another Stadium comes into play. A Stadium with the same name can't be played."
    ],
    "set": {
        "id": "sv2",
        "name": "Paldea Evolved",
        "series": "Scarlet & Violet",
        "printedTotal": 193,
        "total": 279,
        "legalities": {
            "unlimited": "Legal",
            "standard": "Legal",
            "expanded": "Legal"
        },
        "releaseDate": "2023/06/09",
        "updatedAt": "2023/06/09 15:00:00",
        "images": {
            "symbol": "https://images.pokemontcg.io/sv2/symbol.png",
            "logo": "https://images.pokemontcg.io/sv2/logo.png"
        }
    },
    "number": "171",
    "artist": "Oswaldo KATO",
    "rarity": "Uncommon",
    "legalities": {
        "unlimited": "Legal",
        "standard": "Legal",
        "expanded": "Legal"
    },
    "regulationMark": "G",
    "images": {
        "small": "https://images.pokemontcg.io/sv2/171.png",
        "large": "https://images.pokemontcg.io/sv2/171_hires.png"
    },
    "tcgplayer": {
        "url": "https://prices.pokemontcg.io/tcgplayer/sv2-171",
        "updatedAt": "2023/10/24",
        "prices": {
            "normal": {
                "low": 0.08,
                "mid": 0.31,
                "high": 20,
                "market": 0.35,
                "directLow": null
            },
            "reverseHolofoil": {
                "low": 0.08,
                "mid": 0.43,
                "high": 2.95,
                "market": 0.66,
                "directLow": null
            }
        }
    },
    "cardmarket": {
        "url": "https://prices.pokemontcg.io/cardmarket/sv2-171",
        "updatedAt": "2023/10/24",
        "prices": {
            "averageSellPrice": 0.21,
            "lowPrice": 0.02,
            "trendPrice": 0.22,
            "germanProLow": 0,
            "suggestedPrice": 0,
            "reverseHoloSell": 0.3,
            "reverseHoloLow": 0.02,
            "reverseHoloTrend": 0.33,
            "lowPriceExPlus": 0.02,
            "avg1": 0.21,
            "avg7": 0.22,
            "avg30": 0.21,
            "reverseHoloAvg1": 0.36,
            "reverseHoloAvg7": 0.31,
            "reverseHoloAvg30": 0.3
        }
    }
}